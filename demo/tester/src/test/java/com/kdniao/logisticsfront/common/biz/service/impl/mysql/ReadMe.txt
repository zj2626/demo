查询优化:

子查询优化:
    分类:
        1.子查询在目标列位置:
            要求:子查询必须为标量子查询
        2.子查询在From子句位置:
            要求:子查询不能为相关子查询; 非相关子查询必须指定别名
            优化:对于非相关子查询,可以上拉子查询到父查询,变为多表连接查询,再针对多表连接进行优化
        3.子查询在Where子句位置:
            要求: 1.对于等值操作:子查询必须为标量子查询
                  2.对于使用谓词的操作(IN,BETWEEN,EXISTS):优化方式不尽相同
        4.子查询在Join/On子句位置:

        5.子查询在GroupBy子句位置: 没意义
        6.子查询在OrderBy子句位置: 没意义

    方式:
        1.子查询合并: 多个子查询合并成为一个子查询, 可以把多次表扫描,多次连接变成一次
        2.子查询展开(子查询反嵌套,子查询上拉):把子查询重写为等价的多表连接操作,使层次尽可能减少
            (IN/ANY/SOME/ALL/EXISTS依据情况转换为半连接(semi-jion),普通类型子查询消除)
        3.聚合子查询消除: 部分数据库系统支持标量聚集子查询(包含聚合函数的子查询)消除

    Mysql支持优化的子查询
        简单的子查询
            1.简单select查询中的子查询
            2.带有distinct,orderby,limit操作的简单select查询中的子查询
    Mysql不支持优化的子查询
        1.带有UNION操作
        2.带有GROUPBY,HAVING,聚合函数
        3.使用ORDERBY中带有LIMIT(同时)
        4.内表外表个数超过mysql的最大连接数(63张)

    Mysql对子查询优化技术的支持
        1.子查询合并--不支持
        2.子查询展开--有限支持
        3.聚合子查询消除--不支持
